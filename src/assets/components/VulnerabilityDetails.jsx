/**
 * VulnerabilityDetails Component
 * 
 * A comprehensive vulnerability management information display component.
 * Features:
 * - Interactive vulnerability type selection
 * - Dynamic content updates based on selection
 * - Animated content transitions
 * - Responsive layout with sidebar navigation
 * 
 * @component
 * @example
 * <VulnerabilityDetails />
 */

import React, { useState } from "react";
import { motion } from "framer-motion";
import BtnSales from "./BtnSales";
import VulnerabilityOption from "./VulnerabilityOption";
import { vulnerabilityInfo } from "./../datas";

export default function VulnerabilityDetails() {

  const wrapperVariants = {
    hidden: { opacity: 0, y: "30%" },
    visible: {
      opacity: 1,
      y: 0,
      transition: {
        duration: 1,
        staggerChildren: 0.3,
      },
    },
  };

  const childVariants = {
    hidden: {
      opacity: 0,
    },
    visible: {
      opacity: 1,
    },
  };

  const [selectedTitle, setSelectedTitle] = useState("vulnerability");
  const [title, setTitle] = useState("Vulnerability Management");
  
  const [paragraphs, setParagraphs] = useState([
    `Traditional vulnerability management platforms struggle with excessive false positives and noise. Our vulnerability management platform, powered by Nuclei, delivers high-fidelity scanning to identify actual exploitable vulnerabilities that have real-world impact rather than just relying on CVSS scores. By leveraging the global open-source community, our library of over 9,000 Nuclei templates reflect the latest CVEs and trending misconfigurations.`,
    `Our product integrates asset data from cloud platforms to provide essential context, allowing you to prioritize and manage vulnerabilities effectively. With multiple status tracking and easy export options via JSON, API, or Jira integration, remediation is streamlined for your engineering teams.`,
  ]);
  const [options, setOptions] = useState([
    "Exploitable vulnerabilities",
    "10x faster triage",
    "Open source community",
  ]);

  return (
    <>
      <section className="w-full pt-8">
        <div className="custom-container-sm pt-4">
          <div
            // variants={wrapperVariants}
            // whileInView={wrapperVariants}
            // initial="hidden"
            // visible="visible"
            className="relative z-40 flex w-full flex-col gap-2 md:flex-row md:gap-10"
          >
            <div className="w-full md:w-1/3 md:pl-10">
              <div className="flex h-auto w-full flex-col pb-12 pt-12 md:border-r md:border-gray/15 md:pb-20 md:pt-14">
                {vulnerabilityInfo.map((title) => (
                  <div key={title.id}>
                    <h5
                      onClick={() => {
                        setSelectedTitle(title.id);
                        setTitle(title.label + title.restOfTitle);
                        setParagraphs(title.text);
                        setOptions(title.options);
                      }}
                      className={`text-gray font-medium tracking-xs text-sm md:text-base leading-base relative w-full p-5 md:border-b md:border-gray/15 cursor-pointer hover:text-white ${
                        selectedTitle === title.id ? "text-white" : ""
                      }`}
                    >
                      {title.label}
                    </h5>
                  </div>
                ))}
              </div>
            </div>
            <div className="flex w-full flex-col justify-center gap-6 p-4 md:w-2/3 md:p-12">
              <div className="text-white">
                <h5 className="text-xl font-semibold">{title}</h5>
              </div>
              <motion.div
                className="max-w-160 font-light tracking-xs text-sm md:text-base text-gray leading-6"
                variants={childVariants}
              >
                <p className="">{paragraphs[0]}</p>
                <br />
                <p className="">{paragraphs[1]}</p>
              </motion.div>
              <div className="flex w-full flex-col items-start gap-6 md:flex-row">
                <VulnerabilityOption option={options[0]} />
                <VulnerabilityOption option={options[1]} />
                <VulnerabilityOption option={options[2]} />
              </div>
              <div className="">
                <BtnSales />
              </div>
            </div>
          </div>
        </div>
      </section>
    </>
  );
}
